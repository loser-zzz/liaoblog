<!DOCTYPE html>
<html lang="en">
    <head>
  <!-- 元数据 -->
  <meta charset="utf-8">
  <link rel="icon" href="../images/logo.jpg">
  
  <title>生命是一场无法回放的电影</title>
  
  <meta name="author" content="Liao" />
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="robots" content="index,follow" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <meta name="format-detection" content="telphone=no, email=no" />
  
    <meta name="keywords" content="" />
  
  <meta property="og:type" content="website">
<meta property="og:title" content="生命是一场无法回放的电影">
<meta property="og:url" content="https://loser-zzz.github.io/liaoblog/page/2/index.html">
<meta property="og:site_name" content="生命是一场无法回放的电影">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://loser-zzz.github.io/images/logo.jpg">
<meta property="article:author" content="Liao">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://loser-zzz.github.io/images/logo.jpg">
  
  <!-- 站点验证相关 -->
  
    
    
    
  
  <!-- 样式表文件 -->
  <link rel="stylesheet" id="kratos-css" href="/liaoblog/css/kratosr.min.css" media="all"></script>
  
    <link rel="stylesheet" id="darkmode-css" href="/liaoblog/css/kr-color-dark.min.css" media="(prefers-color-scheme: dark)"></script>
    <script src="/liaoblog/js/kr-dark.min.js"></script>
  
  
    <link rel="stylesheet" id="highlight-css" href="/liaoblog/css/highlight/night-eighties.min.css" media="all"></script>
  
  <link rel="stylesheet" id="fontawe-css" href="/liaoblog/vendors/font-awesome@4.7.0/css/font-awesome.min.css" media="all"></script>
  <link rel="stylesheet" id="nprogress-css" href="/liaoblog/vendors/nprogress@0.2.0/nprogress.css" media="all"></script>
  
  
    <link rel="stylesheet" href="/liaoblog/vendors/aplayer@1.10.1/dist/APlayer.min.css"></script>
  
  
    <link rel="stylesheet" href="/liaoblog/vendors/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"></script>
  
  <!-- 不得不预先加载的一些JS文件 -->
  <script src="/liaoblog/vendors/jquery@3.6.0/dist/jquery.min.js"></script>
  
    <script src="/liaoblog/vendors/qrcode_js@1.0.0/qrcode.min.js"></script>
  
  
  <style>
    
    
  </style>
  
<meta name="generator" content="Hexo 6.3.0"></head>


    <body class="custom-background">
        <div id="kratos-wrapper">
    <div id="kratos-page">
        <div id="kratos-header">
            <header id="kratos-desktop-topnav" class="kratos-topnav">
                <div class="container">
                    <div class="nav-header">
                        <nav id="kratos-menu-wrap">
                            <ul id="kratos-primary-menu" class="sf-menu">
                                
                                    
                                        <li>
                                            
                                                <a href="/liaoblog/">
                                            
                                                
                                                    <i class="fa fa-home"></i>
                                                
                                                首页
                                            </a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="/liaoblog/archives/">
                                            
                                                
                                                    <i class="fa fa-book"></i>
                                                
                                                档案馆
                                            </a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="/liaoblog/friends/">
                                            
                                                
                                                    <i class="fa fa-heartbeat"></i>
                                                
                                                好伙伴
                                            </a>
                                            
                                        </li>
                                    
                                
                            </ul>
                        </nav>
                    </div>
                </div>
            </header>
            <header id="kratos-mobile-topnav" class="kratos-topnav">
                <div class="container">
                    <div class="color-logo"><a href="/liaoblog/">生命是一场无法回放的电影</a></div>
                    <div class="nav-toggle">
                        <a class="kratos-nav-toggle js-kratos-nav-toggle">
                            <i></i>
                        </a>
                    </div>
                </div>
            </header>
        </div>
        <div class="kratos-start kratos-hero-2">
            <!-- <div class="kratos-overlay"></div> -->
            <div class="kratos-cover kratos-cover-2 text-center">
                <div class="desc desc2 animate-box">
                    <a href="/liaoblog/">
                        <h2>生命是一场无法回放的电影</h2> <br />
                        <span></span>
                    </a>
                </div>
            </div>
        </div>

        <div id="kratos-blog-post">
            <div class="container">
                <div id="main" class="row">
                    

        

            <section class="col-md-8">

        

            <!-- Breadcrumb for tag & category page -->




    
    
        <article class="kratos-hentry kratos-entry-border-new clearfix" itemscope itemtype="https://schema.org/Article">
            <div class="kratos-status">
                
                    <i class="fa fa-refresh"></i>
                
                <div class="kratos-status-inner">
                    <div class="kratos-status-content" itemprop="articleBody">
                        
                            <h1 id="Centos7-6安装oniguruma"><a href="#Centos7-6安装oniguruma" class="headerlink" title="Centos7.6安装oniguruma"></a>Centos7.6安装oniguruma</h1><h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>  为啥要安装oniguruma，是因为PHP7.4.x中mbstring的正则表达式功能需要oniguruma。</p>
<h3 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h3><ol>
<li><p>执行以下代码：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/src</span><br><span class="line">wget https://github.com/kkos/oniguruma/archive/v6.9.4.tar.gz -O oniguruma-6.9.4.tar.gz </span><br><span class="line">tar -zxvf oniguruma-6.9.4.tar.gz</span><br><span class="line">cd oniguruma-6.9.4/</span><br><span class="line">./autogen.sh</span><br><span class="line">./configure --prefix=/usr --libdir=/lib64</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>
</li>
<li><p>根据小网站的提示，configure必须要有“–libdir&#x3D;&#x2F;lib64”这个参数，不然编译php7.4.x的时候一定会报No package ‘oniguruma’ found。当然除非你编译PHP的时候不使用mbstring的功能。</p>
</li>
</ol>
<h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><p>  找挺久的一个资料，虽然广大网友也遇到了这个问题，但是终究没有试出一个合适的方案，翻了很久终于在一个小网站里面找到了。</p>

                        
                    </div>
                </div>
            </div>
            
                <footer class="kratos-post-meta-new">
                    <span class="pull-left">
                        <time datetime="2023-09-05T14:02:26.749Z" itemprop="datePublished">
                            <a><i class="fa fa-calendar"></i> 2023-09-05</a>
                        </time>
                        
                        
                            <!-- 当前仅支持valine/waline自带的统计功能 -->
                            
                        
                        
                            <!-- 当前仅支持waline自带的统计功能 -->
                            
                        
                    </span>
                    
                    
                        <span class="pull-right">
                            <a class="read-more" href="/liaoblog/2023/09/05/Centos/Centos7.6%E5%AE%89%E8%A3%85oniguruma/" title="留言">留言<i class="fa fa-chevron-circle-right"></i></a>
                        </span>
                    

                </footer>
            
        </article>
    

    
    
        <article class="kratos-hentry kratos-entry-border-new clearfix" itemscope itemtype="https://schema.org/Article">
            <div class="kratos-status">
                
                    <i class="fa fa-refresh"></i>
                
                <div class="kratos-status-inner">
                    <div class="kratos-status-content" itemprop="articleBody">
                        
                            <h1 id="Centos7-6升级gcc"><a href="#Centos7-6升级gcc" class="headerlink" title="Centos7.6升级gcc"></a>Centos7.6升级gcc</h1><h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>  mysql8需要，升级gcc。</p>
<h3 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h3><ol>
<li><p>安装依赖：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install bzip2 flex</span><br></pre></td></tr></table></figure>
</li>
<li><p>进入源码目录：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/src</span><br></pre></td></tr></table></figure>
</li>
<li><p>下载源码包：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://ftp.gnu.org/gnu/gcc/gcc-8.3.0/gcc-8.3.0.tar.gz</span><br></pre></td></tr></table></figure>
</li>
<li><p>解压文件：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf gcc-8.3.0.tar.gz</span><br></pre></td></tr></table></figure>
</li>
<li><p>进入解压的文件夹：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd gcc-8.3.0</span><br></pre></td></tr></table></figure>
</li>
<li><p>继续安装依赖：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./contrib/download_prerequisites</span><br></pre></td></tr></table></figure>
</li>
<li><p>执行命令后它会自动下载mpfr、gmp、mpc isl这4个库。</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd blogName</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>
</li>
<li><p>建立一个文件夹：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir build</span><br></pre></td></tr></table></figure>
</li>
<li><p>进入文件夹：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd build</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">../configure --prefix=/usr/local/gcc --enable-languages=c,c++ --disable-multilib</span><br></pre></td></tr></table></figure>
</li>
<li><p>编译和安装：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除旧版本的gcc：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y remove gcc</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建软连接：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ln -s /usr/local/gcc/bin/gcc /usr/bin/gcc</span><br><span class="line">ln -s /usr/local/gcc/bin/g++ /usr/bin/g++</span><br></pre></td></tr></table></figure></li>
<li><p>查看版本：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gcc –v</span><br><span class="line">g++ -v</span><br></pre></td></tr></table></figure>
<p><img src="/liaoblog/centos-gcc-1.png" alt="这是图片"><br><img src="/liaoblog/centos-gcc-2.png" alt="这是图片"></p>
</li>
<li><p>就这样完成了？不，你错了，还有一个叫动态库的东西，版本更新了，但是动态库不一定更新了。是不是很惊喜（我更新完就去编译mysql了，然后炸了，丢）。</p>
</li>
<li><p>这里就不做是否动态库更新的判断了，直接就当做动态库没有更新。</p>
</li>
<li><p>查询gcc的安装路径:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -name &quot;libstdc++.so*&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>进入操作目录:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/lib64/</span><br></pre></td></tr></table></figure>
</li>
<li><p>复制安装好的gcc文件到操作目录:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp /usr/local/gcc/lib64/libstdc++.so.6.0.25 /usr/lib64/</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除旧的软连接，怕删错就拷贝一份做备份:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -rf libstdc++.so.6</span><br></pre></td></tr></table></figure>
</li>
<li><p>添加软连接:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s libstdc++.so.6.0.25 libstdc++.so.6</span><br></pre></td></tr></table></figure>
</li>
<li><p>到这一步才是安装完成。</p>
</li>
</ol>

                        
                    </div>
                </div>
            </div>
            
                <footer class="kratos-post-meta-new">
                    <span class="pull-left">
                        <time datetime="2023-09-05T14:02:26.743Z" itemprop="datePublished">
                            <a><i class="fa fa-calendar"></i> 2023-09-05</a>
                        </time>
                        
                        
                            <!-- 当前仅支持valine/waline自带的统计功能 -->
                            
                        
                        
                            <!-- 当前仅支持waline自带的统计功能 -->
                            
                        
                    </span>
                    
                    
                        <span class="pull-right">
                            <a class="read-more" href="/liaoblog/2023/09/05/Centos/Centos7.6%E5%8D%87%E7%BA%A7gcc/" title="留言">留言<i class="fa fa-chevron-circle-right"></i></a>
                        </span>
                    

                </footer>
            
        </article>
    

    
    
        <article class="kratos-hentry kratos-entry-border-new clearfix" itemscope itemtype="https://schema.org/Article">
            <div class="kratos-status">
                
                    <i class="fa fa-refresh"></i>
                
                <div class="kratos-status-inner">
                    <div class="kratos-status-content" itemprop="articleBody">
                        
                            <h1 id="Centos7-6升级cmake"><a href="#Centos7-6升级cmake" class="headerlink" title="Centos7.6升级cmake"></a>Centos7.6升级cmake</h1><h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>  由于要手动编译mysql8，需要高版本的cmake，不得不更新cmake。</p>
<h3 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h3><ol>
<li><p>进入src目录，执行以下命令：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/src</span><br></pre></td></tr></table></figure>
</li>
<li><p>下载源码包：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/src</span><br></pre></td></tr></table></figure>
</li>
<li><p>解压源码包：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf cmake-3.13.2.tar.gz</span><br></pre></td></tr></table></figure>
</li>
<li><p>进入解压后的文件夹：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd  /usr/local/src/cmake-3.13.2</span><br></pre></td></tr></table></figure>
</li>
<li><p>开始配置(–prefix 指定安装目录)：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./bootstrap --prefix=/usr/local/cmake</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置完就开始编译安装：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>
</li>
<li><p>如果是系统有自带的cmake，就要删除，已删除过的请忽略：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum remove cmake -y</span><br></pre></td></tr></table></figure></li>
<li><p>安装完创建命令的软连接：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s /usr/local/cmake/bin/cmake /usr/bin/cmake</span><br></pre></td></tr></table></figure>
</li>
<li><p>执行版本的命令：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmake --version</span><br></pre></td></tr></table></figure>
</li>
<li><p>出现如下就是成功了：</p>
<p><img src="/liaoblog/centos-cmake.png" alt="这是图片"></p>
</li>
</ol>

                        
                    </div>
                </div>
            </div>
            
                <footer class="kratos-post-meta-new">
                    <span class="pull-left">
                        <time datetime="2023-09-05T14:02:26.737Z" itemprop="datePublished">
                            <a><i class="fa fa-calendar"></i> 2023-09-05</a>
                        </time>
                        
                        
                            <!-- 当前仅支持valine/waline自带的统计功能 -->
                            
                        
                        
                            <!-- 当前仅支持waline自带的统计功能 -->
                            
                        
                    </span>
                    
                    
                        <span class="pull-right">
                            <a class="read-more" href="/liaoblog/2023/09/05/Centos/Centos7.6%E5%8D%87%E7%BA%A7cmake/" title="留言">留言<i class="fa fa-chevron-circle-right"></i></a>
                        </span>
                    

                </footer>
            
        </article>
    

    
    
        <article class="kratos-hentry kratos-entry-border-new clearfix" itemscope itemtype="https://schema.org/Article">
            <div class="kratos-status">
                
                    <i class="fa fa-refresh"></i>
                
                <div class="kratos-status-inner">
                    <div class="kratos-status-content" itemprop="articleBody">
                        
                            <h1 id="Centos7-6下的Mysql8-0-20编译错误合集"><a href="#Centos7-6下的Mysql8-0-20编译错误合集" class="headerlink" title="Centos7.6下的Mysql8.0.20编译错误合集"></a>Centos7.6下的Mysql8.0.20编译错误合集</h1><h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>  搭建mysql8.0.20遇见的问题点汇总。</p>
<h3 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h3><ol>
<li><p>错误：‘SYS_gettid’：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">  /usr/local/src/mysql-8.0.20/storage/innobase/buf/buf0buf.cc: 在函数‘void buf_pool_create(buf_pool_t*, ulint, ulint, std::mutex*, dberr_t&amp;)’中:</span><br><span class="line">/usr/local/src/mysql-8.0.20/storage/innobase/buf/buf0buf.cc:1219:44: 错误：‘SYS_gettid’在此作用域中尚未声明</span><br><span class="line">  setpriority(PRIO_PROCESS, (pid_t)syscall(SYS_gettid), -20);</span><br><span class="line">                                           ^~~~~~~~~~</span><br><span class="line">/usr/local/src/mysql-8.0.20/storage/innobase/buf/buf0buf.cc:1219:44: 附注：suggested alternative: ‘my_getwd’</span><br><span class="line">  setpriority(PRIO_PROCESS, (pid_t)syscall(SYS_gettid), -20);</span><br><span class="line">                                           ^~~~~~~~~~</span><br><span class="line">                                           my_getwd</span><br><span class="line">make[2]: *** [storage/innobase/CMakeFiles/innobase.dir/buf/buf0buf.cc.o] 错误 1</span><br><span class="line">make[1]: *** [storage/innobase/CMakeFiles/innobase.dir/all] 错误 2</span><br><span class="line">make: *** [all] 错误 2</span><br></pre></td></tr></table></figure>

<p> <img src="/liaoblog/centos-mysql-error-1.png" alt="这是图片"></p>
</li>
<li><p>解决方案：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /usr/local/src/mysql-8.0.20/storage/innobase/buf/buf0buf.cc</span><br></pre></td></tr></table></figure>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">include <span class="string">&quot;sys/syscall.h&quot;</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>错误：‘os_compare_and_swap_thread_id’ 注意：文件名是lock0lock.cc:</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">	  /usr/local/src/mysql-8.0.20/storage/innobase/lock/lock0lock.cc: 在函数‘void lock_mark_trx_for_rollback(hit_list_t&amp;, trx_id_t, trx_t*)’中:</span><br><span class="line">/usr/local/src/mysql-8.0.20/storage/innobase/lock/lock0lock.cc:1171:9: 错误：‘os_compare_and_swap_thread_id’在此作用域中尚未声明</span><br><span class="line">   	cas = os_compare_and_swap_thread_id(&amp;trx-&gt;killed_by, 0, thread_id);</span><br><span class="line">         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">/usr/local/src/mysql-8.0.20/storage/innobase/lock/lock0lock.cc:1171:9: 附注：suggested alternative: ‘os_compare_and_swap_uint64’</span><br><span class="line">   	cas = os_compare_and_swap_thread_id(&amp;trx-&gt;killed_by, 0, thread_id);</span><br><span class="line">         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">         os_compare_and_swap_uint64</span><br><span class="line">	make[2]: *** [storage/innobase/CMakeFiles/innobase.dir/lock/lock0lock.cc.o] 错误 1</span><br><span class="line">	make[1]: *** [storage/innobase/CMakeFiles/innobase.dir/all] 错误 2</span><br><span class="line">	make: *** [all] 错误 2</span><br></pre></td></tr></table></figure>
<p> <img src="/liaoblog/centos-mysql-error-2.png" alt="这是图片"></p>
</li>
<li><p>解决方案：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /usr/local/src/mysql-8.0.20/storage/innobase/lock/lock0lock.cc</span><br></pre></td></tr></table></figure>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将 “os_compare_and_swap_thread_id” 修改为</span></span><br><span class="line">os_compare_and_swap_lint</span><br></pre></td></tr></table></figure>
</li>
<li><p>错误：‘os_compare_and_swap_thread_id’注意：文件名是trx0trx.cc：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"> /usr/local/src/mysql-8.0.20/storage/innobase/trx/trx0trx.cc: 在函数‘void trx_init(trx_t*)’中:</span><br><span class="line">/usr/local/src/mysql-8.0.20/storage/innobase/trx/trx0trx.cc:223:5: 错误：‘os_compare_and_swap_thread_id’在此作用域中尚未声明</span><br><span class="line">    os_compare_and_swap_thread_id(&amp;trx-&gt;killed_by, thread_id, 0);</span><br><span class="line">    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">/usr/local/src/mysql-8.0.20/storage/innobase/trx/trx0trx.cc:223:5: 附注：suggested alternative: ‘os_compare_and_swap_lint’</span><br><span class="line">    os_compare_and_swap_thread_id(&amp;trx-&gt;killed_by, thread_id, 0);</span><br><span class="line">    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">    os_compare_and_swap_lint</span><br><span class="line">/usr/local/src/mysql-8.0.20/storage/innobase/trx/trx0trx.cc: 在函数‘void trx_kill_blocking(trx_t*)’中:</span><br><span class="line">/usr/local/src/mysql-8.0.20/storage/innobase/trx/trx0trx.cc:3235:5: 错误：‘os_compare_and_swap_thread_id’在此作用域中尚未声明</span><br><span class="line">    os_compare_and_swap_thread_id(&amp;victim_trx-&gt;killed_by, thread_id, 0);</span><br><span class="line">    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">/usr/local/src/mysql-8.0.20/storage/innobase/trx/trx0trx.cc:3235:5: 附注：suggested alternative: ‘os_compare_and_swap_lint’</span><br><span class="line">    os_compare_and_swap_thread_id(&amp;victim_trx-&gt;killed_by, thread_id, 0);</span><br><span class="line">    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">    os_compare_and_swap_lint</span><br><span class="line">make[2]: *** [storage/innobase/CMakeFiles/innobase.dir/trx/trx0trx.cc.o] 错误 1</span><br><span class="line">make[1]: *** [storage/innobase/CMakeFiles/innobase.dir/all] 错误 2</span><br><span class="line">make: *** [all] 错误 2</span><br></pre></td></tr></table></figure>
<p> <img src="/liaoblog/centos-mysql-error-3.png" alt="这是图片"></p>
</li>
<li><p>解决方案：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /usr/local/src/mysql-8.0.20/storage/innobase/trx/trx0trx.cc</span><br></pre></td></tr></table></figure>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将 “os_compare_and_swap_thread_id” 修改为</span></span><br><span class="line">os_compare_and_swap_lint</span><br></pre></td></tr></table></figure></li>
</ol>

                        
                    </div>
                </div>
            </div>
            
                <footer class="kratos-post-meta-new">
                    <span class="pull-left">
                        <time datetime="2023-09-05T14:02:26.732Z" itemprop="datePublished">
                            <a><i class="fa fa-calendar"></i> 2023-09-05</a>
                        </time>
                        
                        
                            <!-- 当前仅支持valine/waline自带的统计功能 -->
                            
                        
                        
                            <!-- 当前仅支持waline自带的统计功能 -->
                            
                        
                    </span>
                    
                    
                        <span class="pull-right">
                            <a class="read-more" href="/liaoblog/2023/09/05/Centos/Centos7.6%E4%B8%8B%E7%9A%84Mysql8.0.20%E7%BC%96%E8%AF%91%E9%94%99%E8%AF%AF%E5%90%88%E9%9B%86/" title="留言">留言<i class="fa fa-chevron-circle-right"></i></a>
                        </span>
                    

                </footer>
            
        </article>
    

    
    
        <article class="kratos-hentry kratos-entry-border-new clearfix" itemscope itemtype="https://schema.org/Article">
            <div class="kratos-status">
                
                    <i class="fa fa-refresh"></i>
                
                <div class="kratos-status-inner">
                    <div class="kratos-status-content" itemprop="articleBody">
                        
                            <h1 id="Centos7-6下的LAMP之PHP编译"><a href="#Centos7-6下的LAMP之PHP编译" class="headerlink" title="Centos7.6下的LAMP之PHP编译"></a>Centos7.6下的LAMP之PHP编译</h1><h3 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h3><ol>
<li><p>安装以下的依赖：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install libxml2 libxml2-devel openssl openssl-devel bzip2 bzip2-devel libcurl libcurl-devel libjpeg libjpeg-devel libpng libpng-devel freetype freetype-devel gmp gmp-devel readline readline-devel libxslt libxslt-devel zlib zlib-devel glibc glibc-devel glib2 glib2-devel ncurses curl gdbm-devel libXpm-devel libX11-devel gd-devel gmp-devel expat-devel libicu-devel libzip-devel sqlite-devel libtool</span><br></pre></td></tr></table></figure>
</li>
<li><p>如果要使用mbstring的功能一定要安装oniguruma，不安装oniguruma就会报No package ‘oniguruma’ found。</p>
</li>
<li><p>选用PHP 7.4.8 作为编译版本：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/src</span><br><span class="line">wget https://www.php.net/distributions/php-7.4.8.tar.gz</span><br><span class="line">   tar -zxvf php-7.4.8.tar.gz</span><br><span class="line">   cd php-7.4.8</span><br></pre></td></tr></table></figure>
</li>
<li><p>预编译：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">./configure \</span><br><span class="line">   --prefix=/usr/local/php7 \</span><br><span class="line">   --with-config-file-path=/etc \</span><br><span class="line">   --with-apxs2=/usr/local/apache2/bin/apxs \</span><br><span class="line">   --enable-fpm \</span><br><span class="line">   --with-fpm-user=www  \</span><br><span class="line">   --with-fpm-group=www \</span><br><span class="line">   --enable-inline-optimization \</span><br><span class="line">   --disable-debug \</span><br><span class="line">   --disable-rpath \</span><br><span class="line">   --enable-shared  \</span><br><span class="line">   --enable-soap \</span><br><span class="line">   --with-xmlrpc \</span><br><span class="line">   --with-openssl \</span><br><span class="line">   --with-mhash \</span><br><span class="line">   --with-sqlite3 \</span><br><span class="line">   --with-zlib \</span><br><span class="line">   --enable-bcmath \</span><br><span class="line">   --with-iconv \</span><br><span class="line">   --with-bz2 \</span><br><span class="line">   --enable-calendar \</span><br><span class="line">   --with-curl \</span><br><span class="line">   --with-cdb \</span><br><span class="line">   --enable-dom \</span><br><span class="line">   --enable-exif \</span><br><span class="line">   --enable-fileinfo \</span><br><span class="line">   --enable-filter \</span><br><span class="line">   --enable-ftp \</span><br><span class="line">   --with-openssl-dir \</span><br><span class="line">   --with-zlib-dir  \</span><br><span class="line">   --enable-gd-jis-conv \</span><br><span class="line">   --with-gettext \</span><br><span class="line">   --with-gmp \</span><br><span class="line">   --with-mhash \</span><br><span class="line">   --enable-json \</span><br><span class="line">   --enable-mbstring \</span><br><span class="line">   --enable-mbregex \</span><br><span class="line">   --enable-pdo \</span><br><span class="line">   --with-mysqli=mysqlnd \</span><br><span class="line">   --with-pdo-mysql=mysqlnd \</span><br><span class="line">   --with-zlib-dir \</span><br><span class="line">   --with-pdo-sqlite \</span><br><span class="line">   --with-readline \</span><br><span class="line">   --enable-session \</span><br><span class="line">   --enable-shmop \</span><br><span class="line">   --enable-simplexml \</span><br><span class="line">   --enable-sockets  \</span><br><span class="line">   --enable-sysvmsg \</span><br><span class="line">   --enable-sysvsem \</span><br><span class="line">   --enable-sysvshm \</span><br><span class="line">   --with-xsl \</span><br><span class="line">   --with-pear \</span><br></pre></td></tr></table></figure>
</li>
<li><p>编译&amp;&amp;安装：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装完之后开始配置PHP，拷贝php配置文件(基于&#x2F;usr&#x2F;local&#x2F;src&#x2F;php-7.4.8路径)：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cp php.ini-production /etc/php.ini</span><br><span class="line">cp /usr/local/php7/etc/php-fpm.conf.default /usr/local/php7/etc/php-fpm.conf</span><br><span class="line">cp /usr/local/php7/etc/php-fpm.d/www.conf.default /usr/local/php7/etc/php-fpm.d/www.conf</span><br></pre></td></tr></table></figure>
</li>
<li><p>编辑配置文件：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /usr/local/php7/etc/php-fpm.conf</span><br></pre></td></tr></table></figure>
</li>
<li><p>php-fpm.conf文件去掉前面的 ; 号：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pid = /run/php-fpm.pid </span><br></pre></td></tr></table></figure>
</li>
<li><p>编辑 <a href="http://www.conf：">www.conf：</a></p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /usr/local/php7/etc/php-fpm.d/www.conf</span><br></pre></td></tr></table></figure>
</li>
<li><p><a target="_blank" rel="noopener" href="http://www.conf文件去掉前面的/">www.conf文件去掉前面的</a> ; 号：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">listen = 127.0.0.1:9000</span><br></pre></td></tr></table></figure>
</li>
<li><p>编辑开机自启文件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /usr/lib/systemd/system/php-fpm.service</span><br></pre></td></tr></table></figure>
</li>
<li><p>php-fpm.service添加下列语句：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /usr/lib/systemd/system/php-fpm.service</span><br></pre></td></tr></table></figure>
</li>
<li><p>在命令行中运行以下命令，生成静态文件并部署到 GitHub Pages：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">   Description=The PHP FastCGI Process Manager</span><br><span class="line">   After=syslog.target network.target</span><br><span class="line"></span><br><span class="line">   [Service]</span><br><span class="line">   Type=simple</span><br><span class="line">   PIDFile=/run/php-fpm.pid</span><br><span class="line">   ExecStart=/usr/local/php7/sbin/php-fpm --nodaemonize --fpm-config /usr/local/php7/etc/php-fpm.conf</span><br><span class="line">   ExecReload=/bin/kill -USR2 $MAINPID</span><br><span class="line">   ExecStop=/bin/kill -SIGINT $MAINPID</span><br><span class="line"></span><br><span class="line">   [Install]</span><br><span class="line">   WantedBy=multi-user.target</span><br></pre></td></tr></table></figure></li>
<li><p>添加php到系统环境变量：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/profile</span><br><span class="line">export PATH=$PATH:/usr/local/php7/bin</span><br><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置Apache解析php文件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /usr/local/apache2/conf/httpd.conf</span><br></pre></td></tr></table></figure>
</li>
<li><p>httpd.conf修改：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">找到AddType application/x-gzip .gz .tgz 这句话在下面添加</span></span><br><span class="line">AddType application/x-httpd-php .php</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">找到IfModule dir_module这句话，编辑DirectoryIndex</span></span><br><span class="line">DirectoryIndex index.php index.html</span><br></pre></td></tr></table></figure>
</li>
<li><p>到这里就配置完了，重启Apache和PHP：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/apache2/bin/apachectl start</span><br><span class="line">systemctl restart  php-fpm.service</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><ul>
<li>PHP命令：<ul>
<li>systemctl enable php-fpm.service    开机自启</li>
<li>systemctl disable php-fpm.service   取消开机自启</li>
<li>systemctl reload php-fpm.service    重新加载服务</li>
<li>systemctl status php-fpm.service    查看状态</li>
<li>systemctl start php-fpm.service     启动php服务</li>
<li>systemctl stop  php-fpm.service     停止php服务</li>
<li>systemctl restart  php-fpm.service   重启php服务</li>
</ul>
</li>
</ul>

                        
                    </div>
                </div>
            </div>
            
                <footer class="kratos-post-meta-new">
                    <span class="pull-left">
                        <time datetime="2023-09-05T14:02:26.725Z" itemprop="datePublished">
                            <a><i class="fa fa-calendar"></i> 2023-09-05</a>
                        </time>
                        
                        
                            <!-- 当前仅支持valine/waline自带的统计功能 -->
                            
                        
                        
                            <!-- 当前仅支持waline自带的统计功能 -->
                            
                        
                    </span>
                    
                    
                        <span class="pull-right">
                            <a class="read-more" href="/liaoblog/2023/09/05/Centos/Centos7.6%E4%B8%8B%E7%9A%84LAMP%E4%B9%8BPHP%E7%BC%96%E8%AF%91/" title="留言">留言<i class="fa fa-chevron-circle-right"></i></a>
                        </span>
                    

                </footer>
            
        </article>
    

    
    
        <article class="kratos-hentry kratos-entry-border-new clearfix" itemscope itemtype="https://schema.org/Article">
            <div class="kratos-status">
                
                    <i class="fa fa-refresh"></i>
                
                <div class="kratos-status-inner">
                    <div class="kratos-status-content" itemprop="articleBody">
                        
                            <h1 id="Centos7-6下的LAMP之Mysql编译"><a href="#Centos7-6下的LAMP之Mysql编译" class="headerlink" title="Centos7.6下的LAMP之Mysql编译"></a>Centos7.6下的LAMP之Mysql编译</h1><h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>  安装mysql8.0需要高版本的cmake和gcc，所以要手动更新这两个依赖，这两个更新的方法，我另外写了两篇文章。更新完才能执行以下的操作。注意事项：系统盘最好要大于60G。不然会安装失败。</p>
<h3 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h3><ol>
<li><p>进行安装前做些准备工作，比如源码包，依赖包，以及冲突环境，例如以下：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa|grep mariadb</span><br></pre></td></tr></table></figure>
</li>
<li><p>如果存在就要卸载了，不存在就忽略吧，原因是安装mysql的话会和mariadb的文件冲突，执行以下命令：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y remove mariadb* boost-*</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装依赖，执行以下操作：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install ncurses-devel</span><br></pre></td></tr></table></figure>
</li>
<li><p>下载源码包，执行以下操作：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/src</span><br><span class="line">wget https://cdn.mysql.com/Downloads/MySQL-8.0/mysql-boost-8.0.20.tar.gz</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建mysql用户，执行以下操作：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">groupadd mysql</span><br><span class="line">useradd -r -g mysql -s /bin/false mysql</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建安装目录和数据目录，执行以下操作：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /usr/local/mysql</span><br><span class="line">mkdir -p /usr/local/mysql/data</span><br></pre></td></tr></table></figure>
</li>
<li><p>开始解压编译，执行以下操作：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/src</span><br><span class="line">tar -zxvf mysql-boost-8.0.20.tar.gz</span><br><span class="line">cd mysql-boost-8.0.20</span><br><span class="line">cmake . -DCMAKE_INSTALL_PREFIX=/usr/local/mysql \</span><br><span class="line">   -DDEFAULT_CHARSET=utf8mb4 \</span><br><span class="line">   -DDEFAULT_COLLATION=utf8mb4_general_ci \</span><br><span class="line">   -DSYSCONFDIR=/etc \</span><br><span class="line">   -DWITH_EXTRA_CHARSETS=all \</span><br><span class="line">   -DMYSQL_DATADIR=/usr/local/mysql/data \</span><br><span class="line">   -DWITH_BOOST=/usr/local/src/mysql-8.0.20/boost \</span><br><span class="line">   -DDOWNLOAD_BOOST=1 \</span><br><span class="line">   -DFORCE_INSOURCE_BUILD=1 \</span><br><span class="line">   -DWITHOUT_PARTITION_STORAGE_ENGINE=0 </span><br><span class="line">   make  &amp;&amp; make install</span><br></pre></td></tr></table></figure>
</li>
<li><p>编译安装会出现一些问题，就是一些函数不存在要求替换，问题可以参考这个文章，Centos7.6下的Mysql8.0.20编译错误合集，有些问题可以仔细看看，手动替换上面的函数，然后重新make &amp;&amp; make install 就好。</p>
</li>
<li><p>初始化mysql：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/mysql/bin</span><br><span class="line">./mysqld --initialize --user=mysql --datadir=/usr/local/mysql/data --character-set-server=utf8mb4</span><br></pre></td></tr></table></figure>
</li>
<li><p>初始化完之后要记得保存mysql的临时密码。</p>
<p><img src="/liaoblog/centos-mysql-1.png" alt="这是图片"></p>
</li>
<li><p>安装ssl：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/mysql/bin/mysql_ssl_rsa_setup</span><br></pre></td></tr></table></figure>
</li>
<li><p>启动mysql （临时操作，需要另外开一个窗口执行）:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/mysql/bin/mysqld_safe --user=mysql &amp;</span><br></pre></td></tr></table></figure>
</li>
<li><p>连接mysql：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/mysql/bin/mysql -uroot -p</span><br></pre></td></tr></table></figure></li>
<li><p>连接成功，修改密码（我这里修改root只是为了方便，正式环境不要使用简单的密码）:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter user &#x27;root&#x27;@&#x27;localhost&#x27; identified by &quot;root&quot;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置远程登录，为了方便mysql的管理工具连接:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">create user root@&#x27;%&#x27; identified by &#x27;root&#x27;;</span><br><span class="line">grant all privileges on *.* to root@&#x27;%&#x27;;</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置环境变量:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/profile</span><br><span class="line">export PATH=$PATH:/usr/local/mysql/bin</span><br><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置开机自动启动:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /usr/lib/systemd/system/mysql.service</span><br></pre></td></tr></table></figure>
</li>
<li><p>添加以下语句:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">   Description=MySQL Server(8.0)</span><br><span class="line">   Documentation=main:mysqld(8)</span><br><span class="line">   Documentation=http://dev.mysql.com/doc/refman/en/using-systemd.html</span><br><span class="line">   After=network.target</span><br><span class="line">   After=syslog.target</span><br><span class="line"></span><br><span class="line">   [Install]</span><br><span class="line">   WantedBy=multi-user.target</span><br><span class="line"></span><br><span class="line">   [Service]</span><br><span class="line">   User=mysql</span><br><span class="line">   Group=mysql</span><br><span class="line">   ExecStart=/usr/local/mysql/bin/mysqld</span><br><span class="line">   LimitNOFILE=5000</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置开机自启:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable mysql </span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><ul>
<li>生产环境中千万不要把所有权限都分配给远程登陆用户。</li>
<li>Navicat工具版本在12或以下的，会连接不上，原因是mysql8.0版本的加密方式有变更，或出现Authentication plugin ‘caching_sha2_password’这样的问题，需要更改密码的加密方式，这里需要另外自行找答案了，我这里就不详细描述了。</li>
<li>在正式环境下请打开3306端口，由于我这里是直接关闭防火窗的Sao操作。</li>
<li>到这里mysql的安装结束了，这里太繁琐了，电脑不好完全跑不动，网速不好的情况下建议那些大的包从迅雷去下载然后传到虚拟机会快很多。</li>
<li>mysql命令<ul>
<li>systemctl start mysql       启动mysql服务</li>
<li>systemctl restart mysql     重启mysql服务</li>
<li>systemctl status mysql      查询mysql状态</li>
</ul>
</li>
</ul>

                        
                    </div>
                </div>
            </div>
            
                <footer class="kratos-post-meta-new">
                    <span class="pull-left">
                        <time datetime="2023-09-05T14:02:26.719Z" itemprop="datePublished">
                            <a><i class="fa fa-calendar"></i> 2023-09-05</a>
                        </time>
                        
                        
                            <!-- 当前仅支持valine/waline自带的统计功能 -->
                            
                        
                        
                            <!-- 当前仅支持waline自带的统计功能 -->
                            
                        
                    </span>
                    
                    
                        <span class="pull-right">
                            <a class="read-more" href="/liaoblog/2023/09/05/Centos/Centos7.6%E4%B8%8B%E7%9A%84LAMP%E4%B9%8BMysql%E7%BC%96%E8%AF%91/" title="留言">留言<i class="fa fa-chevron-circle-right"></i></a>
                        </span>
                    

                </footer>
            
        </article>
    

    
    
        <article class="kratos-hentry kratos-entry-border-new clearfix" itemscope itemtype="https://schema.org/Article">
            <div class="kratos-status">
                
                    <i class="fa fa-refresh"></i>
                
                <div class="kratos-status-inner">
                    <div class="kratos-status-content" itemprop="articleBody">
                        
                            <h1 id="Centos7-6下的LAMP之Apache编译"><a href="#Centos7-6下的LAMP之Apache编译" class="headerlink" title="Centos7.6下的LAMP之Apache编译"></a>Centos7.6下的LAMP之Apache编译</h1><h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>  平时都是使用集成环境开发，增加开发效率，一时心血来潮决定自己手动编译一次。虽然以前已也编译过，但是每个版本终究还是不同的，有坑需要踩的。<br>  准备centos7.6环境。注意：该文章只使用于借鉴，没有使用于生产环境。慎重。</p>
<h3 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h3><ol>
<li><p>检查是否安装过 wget：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa|grep &quot;wget&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装wget：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install wget</span><br></pre></td></tr></table></figure>
</li>
<li><p>进入源码包的存放位置，没有就创建一个，例如：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/src</span><br></pre></td></tr></table></figure>
</li>
<li><p>准备好Apache的源码包分别执行：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget https://mirrors.tuna.tsinghua.edu.cn/apache/apr/apr-1.7.0.tar.gz</span><br><span class="line">wget http://mirror.bit.edu.cn/apache/apr/apr-util-1.6.1.tar.gz</span><br><span class="line">wget https://ftp.pcre.org/pub/pcre/pcre-8.42.tar.gz</span><br><span class="line">wget https://mirror.bit.edu.cn/apache/httpd/httpd-2.4.43.tar.gz</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装LAMP的依赖包，执行命令：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install gcc gcc-c++ make cmake bison autoconf automake zlib* libxml*  libtool-ltdl-devel* libaio libaio-devel libtool libxml2-devel openssl-devel expat-devel</span><br></pre></td></tr></table></figure>
</li>
<li><p>开始编译安装Apache，apache版本-&gt;httpd-2.4.43 依赖包版本-&gt; pcre-8.42 apr-1.7.0 apr-util-1.6.1。</p>
</li>
<li><p>源码安装 apr-1.7.0.tar.gz：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/src</span><br><span class="line">tar -zxvf apr-1.7.0.tar.gz</span><br><span class="line">cd apr-1.7.0</span><br><span class="line">./configure --prefix=/usr/local/apr</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>
</li>
<li><p>源码安装 apr-util-1.6.1.tar.gz:</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/src/</span><br><span class="line">tar -zxvf apr-util-1.6.1.tar.gz</span><br><span class="line">cd apr-util-1.6.1</span><br><span class="line">./configure --prefix=/usr/local/apr-util --with-apr=/usr/local/apr</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>
</li>
<li><p>源码安装pcre-8.42.tar.gz:</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/src/</span><br><span class="line">tar -zxvf pcre-8.42.tar.gz</span><br><span class="line">cd pcre-8.42</span><br><span class="line">./configure --prefix=/usr/local/pcre</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>
</li>
<li><p>源码安装httpd-2.4.43.tar.gz：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"> cd /usr/local/src/</span><br><span class="line"> tar -zxvf httpd-2.4.43.tar.gz</span><br><span class="line"> cd httpd-2.4.43</span><br><span class="line"> ./configure \</span><br><span class="line">--prefix=/usr/local/apache2 \</span><br><span class="line">--with-apr=/usr/local/apr \</span><br><span class="line">--with-apr-util=/usr/local/apr-util \</span><br><span class="line">--with-pcre=/usr/local/pcre \</span><br><span class="line">--with-zlib \</span><br><span class="line">--enable-so \</span><br><span class="line">--enable-deflate \</span><br><span class="line">--enable-expires \</span><br><span class="line">--enable-headers \</span><br><span class="line">--enable-ssl \</span><br><span class="line">--enable-cgi \</span><br><span class="line">--enable-proxy \</span><br><span class="line">--enable-proxy-fcgi \</span><br><span class="line">--enable-rewrite \</span><br><span class="line">--enable-mpms-shared=all \</span><br><span class="line">--with-mpm=prefork \</span><br><span class="line">--enable-mods-shared=most \</span><br><span class="line">--enable-dav \</span><br><span class="line">--enable-dav-fs \</span><br><span class="line">--enable-dav-lock</span><br><span class="line"> make &amp;&amp; make install</span><br></pre></td></tr></table></figure>
</li>
<li><p>到这里Apache就安装完了，现在开始配置Apache：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir /www</span><br><span class="line">cd /usr/local/apache2/conf</span><br><span class="line">cp ./httpd.conf ./httpd.conf.bak</span><br></pre></td></tr></table></figure>
</li>
<li><p>编辑httpd.conf文件（Apache配置文件）操作点：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi httpd.conf</span><br></pre></td></tr></table></figure>
</li>
<li><p>（Apache配置文件）修改点：</p>
<ul>
<li>#ServerName <a target="_blank" rel="noopener" href="http://www.example.com/">www.example.com:80</a> 修改成  ServerName localhost:80  注意要去掉注释#</li>
<li>DocumentRoot “&#x2F;usr&#x2F;local&#x2F;apache2&#x2F;htdocs” 修改成 DocumentRoot “&#x2F;www” 注意：www是小写</li>
<li>&lt;Directory “&#x2F;usr&#x2F;local&#x2F;apache2&#x2F;htdocs”&gt; 修改成 &lt;Directory “&#x2F;www”&gt; 注意：www是小写</li>
<li>DirectoryIndex index.html 修改成 DirectoryIndex index.php index.html</li>
<li>#Include conf&#x2F;extra&#x2F;httpd-vhosts.conf  修改成 Include conf&#x2F;extra&#x2F;httpd-vhosts.conf</li>
</ul>
</li>
<li><p>编辑完httpd.conf文件，接着编辑httpd-vhosts.conf文件（虚拟主机配置）执行以下操作：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/apache2/conf/extra</span><br><span class="line">cp ./httpd-vhosts.conf ./httpd-vhosts.conf.bak</span><br></pre></td></tr></table></figure>
</li>
<li><p>编辑httpd-vhosts.conf:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi httpd-vhosts.conf</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除以下的配置:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line">    ServerAdmin webmaster@dummy-host.example.com</span><br><span class="line">    DocumentRoot &quot;/usr/local/apache2/docs/dummy-host.example.com&quot;</span><br><span class="line">    ServerName dummy-host.example.com</span><br><span class="line">    ServerAlias www.dummy-host.example.com</span><br><span class="line">    ErrorLog &quot;logs/dummy-host.example.com-error_log&quot;</span><br><span class="line">    CustomLog &quot;logs/dummy-host.example.com-access_log&quot; common</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line"></span><br><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line">    ServerAdmin webmaster@dummy-host2.example.com</span><br><span class="line">    DocumentRoot &quot;/usr/local/apache2/docs/dummy-host2.example.com&quot;</span><br><span class="line">    ServerName dummy-host2.example.com</span><br><span class="line">    ErrorLog &quot;logs/dummy-host2.example.com-error_log&quot;</span><br><span class="line">    CustomLog &quot;logs/dummy-host2.example.com-access_log&quot; common</span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>新增配置:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;VirtualHost _default_:80&gt;</span><br><span class="line">    DocumentRoot &quot;/www&quot;</span><br><span class="line">  &lt;Directory &quot;/www&quot;&gt;</span><br><span class="line">      Options FollowSymLinks ExecCGI</span><br><span class="line">      AllowOverride All</span><br><span class="line">      Order allow,deny</span><br><span class="line">      Allow from all</span><br><span class="line">      Require all granted</span><br><span class="line">      DirectoryIndex index.php index.html</span><br><span class="line">  &lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>到这里Apache总体配置完了。</p>
</li>
<li><p>以下是Apache的启动，停止，重启的命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/apache2/bin/apachectl start          </span><br><span class="line">/usr/local/apache2/bin/apachectl stop</span><br><span class="line">/usr/local/apache2/bin/apachectl restart</span><br></pre></td></tr></table></figure>
<p><img src="/liaoblog/centos-apache-1.png" alt="这是图片"></p>
</li>
</ol>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul>
<li>编译过程中遇到问题莫慌，百度一下其实有很多例子和解决方案，虽然有很多标题党和广告但是自己也要能分辨出有效信息。</li>
<li>为了保证文章的是否有错误的语句，写完之后，按照自己的写文章再搭建了一次，确保没有问题的出现。</li>
</ul>

                        
                    </div>
                </div>
            </div>
            
                <footer class="kratos-post-meta-new">
                    <span class="pull-left">
                        <time datetime="2023-09-05T14:02:26.712Z" itemprop="datePublished">
                            <a><i class="fa fa-calendar"></i> 2023-09-05</a>
                        </time>
                        
                        
                            <!-- 当前仅支持valine/waline自带的统计功能 -->
                            
                        
                        
                            <!-- 当前仅支持waline自带的统计功能 -->
                            
                        
                    </span>
                    
                    
                        <span class="pull-right">
                            <a class="read-more" href="/liaoblog/2023/09/05/Centos/Centos7.6%E4%B8%8B%E7%9A%84LAMP%E4%B9%8BApache%E7%BC%96%E8%AF%91/" title="留言">留言<i class="fa fa-chevron-circle-right"></i></a>
                        </span>
                    

                </footer>
            
        </article>
    



    <div class='text-center pagination'>
    <a class="extend prev" rel="prev" href="/liaoblog/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/liaoblog/">1</a><span class="page-number current">2</span>
    </div>



    <div class="hidden">
        <!-- 加载文章阅读对应的统计功能，评论自带的那种 -->
        
    </div>



        

            </section>

        

                
            

<section id="kratos-widget-area" class="col-md-4 hidden-xs hidden-sm">
    <!-- 文章和页面根据splitter来分割，没有的话就从头开始设置为sticky -->
    
        <div class="sticky-area">
    
    
                <aside id="krw-about" class="widget widget-kratos-about clearfix">
    <div class="photo-background"></div>
    <div class="photo-wrapper clearfix">
        <div class="photo-wrapper-tip text-center">
            <img class="about-photo" src="../images/logo.jpg" loading="lazy" decoding="auto" />
        </div>
    </div>
    <div class="textwidget">
        <p class="text-center"></p>
    </div>
    <div class="site-meta">
        <a class="meta-item" href="/liaoblog/archives/">
            <span class="title">
                文章
            </span>
            <span class="count">
                17
            </span>
        </a>
        <a class="meta-item" href="/liaoblog/categories/">
            <span class="title">
                分类
            </span>
            <span class="count">
                0
            </span>
        </a>
        <a class="meta-item" href="/liaoblog/tags/">
            <span class="title">
                标签
            </span>
            <span class="count">
                0
            </span>
        </a>
    </div>
</aside>
            
                

            
                
            
                
  <aside id="krw-posts" class="widget widget-kratos-posts">
  <h4 class="widget-title"><i class="fa fa-file"></i>最新文章</h4>
  <div class="tab-content">
      <ul class="list-group">
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
      </ul>
  </div>
  </aside>

            
    </div>
</section>
        
        </div>
    </div>
</div>
<footer>
    <div id="footer"  class="ap-lrc"  >
        <div class="container">
            <div class="row">
                <div class="col-md-6 col-md-offset-3 footer-list text-center">
                    <ul class="kratos-social-icons">
                        <!-- Keep for compatibility -->
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <!-- New links -->
                        
                    </ul>
                    <ul class="kratos-copyright">
                        <div>
                            <li>&copy; 2023 生命是一场无法回放的电影 版权所有.</li>
                            <li>本站已运行<span id="span_dt">Loading...</span></li>
                        </div>
                        <div>
                            <li>Theme <a href="https://github.com/Candinya/Kratos-Rebirth" target="_blank">Kratos:Rebirth</a></li>
                            <li>Site built with&nbsp;<i class="fa fa-heart throb" style="color:#d43f57"></i>&nbsp;by Liao.</li>
                        </div>
                        <div>
                            <li>Powered by <a href="https://hexo.io" target="_blank" rel="nofollow">Hexo</a></li>
                            <li>Hosted on <a href="https://github.io" target="_blank">Github Pages</a></li>
                        </div>
                        <div>
                            
                            
                        </div>
                    </ul>
                </div>
            </div>
        </div>
        <div class="kr-tool text-center">
            <div class="tool">
                
                    <div class="box search-box">
                        <a href="/liaoblog/search/">
                            <span class="fa fa-search"></span>
                        </a>
                    </div>
                
                
                    <div class="box theme-box" id="darkmode-switch">
                        <span class="fa fa-adjust"></span>
                    </div>
                
                
                
            </div>
            <div class="box gotop-box">
                <span class="fa fa-chevron-up"></span>
            </div>
        </div>
    </div>
</footer>
</div>
</div>

        <script defer src="/liaoblog/vendors/bootstrap@3.3.4/dist/js/bootstrap.min.js"></script>
<script defer src="/liaoblog/vendors/nprogress@0.2.0/nprogress.js"></script>
<script>
    if (!window.kr) {
        window.kr = {};
    }
    window.kr.notMobile = (!(navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)));
    window.kr.siteRoot = "/liaoblog/";
</script>


    <script async src="/liaoblog/js/candy.min.js"></script>



    <script defer src="/liaoblog/vendors/aplayer@1.10.1/dist/APlayer.min.js"></script>
    
    <script defer src="/liaoblog/vendors/meting@2.0.1/dist/Meting.min.js"></script>
    <meting-js
        server="netease"
        type="playlist"
        id="3204190542"
        order="random"
        fixed="true"
    >
    </meting-js>



    <script defer src="/liaoblog/vendors/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>

<script defer src="/liaoblog/js/kratosr.min.js"></script>
<script defer src="/liaoblog/js/pjax.min.js"></script>



<!-- Extra support for third-party plguins  -->


    </body>
</html>